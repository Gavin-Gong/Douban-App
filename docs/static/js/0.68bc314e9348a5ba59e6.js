webpackJsonp([0,3],{69:function(t,e,o){"use strict";function n(t){return t&&t.__esModule?t:{"default":t}}Object.defineProperty(e,"__esModule",{value:!0});var i=o(4),a=n(i);e["default"]={components:{MIcon:a["default"]},props:{imgurl:{type:String,required:!0},name:{type:String,required:!0},text:{type:String,required:!0},hot:{type:[Number,String]}}}},77:function(t,e,o){(function(t,n){"use strict";function i(t){return t&&t.__esModule?t:{"default":t}}Object.defineProperty(e,"__esModule",{value:!0});var a=o(36),s=i(a),r=o(30),l=(i(r),o(32)),c=i(l),d=o(9),u=i(d),m=o(56),p=i(m),f=o(54),h=i(f),g=o(33),A=i(g),b=o(154),v=i(b);t.component(c["default"].name,c["default"]),e["default"]={data:function(){return{bookDetail:"",commentList:[],isNoScroll:!1,loading:!0,query:{start:0,count:10,lastReq:""}}},components:{Rate:u["default"],Intro:p["default"],Expand:h["default"],TagList:A["default"],Comment:v["default"]},methods:{getBookDetail:function(){var t=this;n.open(),this.$http.get("book/"+this.$route.params.bookId).then(function(e){n.close(),200===e.status&&(t.bookDetail=e.data,console.log(t.bookDetail.rating.average))})},getAnnotations:function(){var t=this;this.isNoScroll||(this.loading=!0);var e="book/"+this.$route.params.bookId+"/annotations?start="+this.query.start+"&count="+this.query.count;e===this.query.lastReq&&this.query.lastReq?(console.log("no repeat request"),this.loading=!1):this.$http.get(e).then(function(e){if(t.loading=!1,200===e.status){var o;console.log(e.data),(o=t.commentList).push.apply(o,(0,s["default"])(e.data.annotations)),t.query.start+=t.query.count,e.data.annotations.length<t.query.count?(t.isNoScroll=!0,console.log("不再获取数据")):console.log("准备下一条数据获取")}else console.err("get comment fail")}),this.query.lastReq=e},loadMore:function(){console.log("loadMore")},join:function(t){return t.join(", ")}},activated:function(){console.log("activated")},deactivated:function(){this.$destroy()},created:function(){this.getBookDetail(),this.getAnnotations()}}}).call(e,o(5),o(3))},117:function(t,e,o){e=t.exports=o(17)(),e.push([t.id,"#book-detail{background-color:#eee}#book-detail .comment-title{margin-bottom:15px;padding-left:15px}#book-detail .infinite-scroll-icon{text-align:center}#book-detail .infinite-scroll-icon .mint-spinner-fading-circle{display:inline-block}","",{version:3,sources:["/./src/pages/book/book-detail.vue"],names:[],mappings:"AACA,aAAa,qBAAqB,CACjC,AACD,4BAA4B,mBAAmB,iBAAiB,CAC/D,AACD,mCAAmC,iBAAiB,CACnD,AACD,+DAA+D,oBAAoB,CAClF",file:"book-detail.vue",sourcesContent:["\n#book-detail{background-color:#eee\n}\n#book-detail .comment-title{margin-bottom:15px;padding-left:15px\n}\n#book-detail .infinite-scroll-icon{text-align:center\n}\n#book-detail .infinite-scroll-icon .mint-spinner-fading-circle{display:inline-block\n}\n"],sourceRoot:"webpack://"}])},119:function(t,e,o){e=t.exports=o(17)(),e.push([t.id,".comment[data-v-c5d5119c]{overflow:hidden;margin-bottom:16px}.comment .avatar[data-v-c5d5119c]{float:left;width:40px;height:40px;border-radius:50%}.comment .right-info[data-v-c5d5119c]{margin-left:50px}.comment .right-info p[data-v-c5d5119c]{word-break:break-word}.comment .right-info .hot[data-v-c5d5119c]{float:right}.comment .right-info .name[data-v-c5d5119c]{font-size:16px;font-weight:700}","",{version:3,sources:["/./src/components/pages/comment.vue"],names:[],mappings:"AACA,0BAA0B,gBAAgB,kBAAkB,CAC3D,AACD,kCAAkC,WAAW,WAAW,YAAY,iBAAiB,CACpF,AACD,sCAAsC,gBAAgB,CACrD,AACD,wCAAwC,qBAAqB,CAC5D,AACD,2CAA2C,WAAW,CACrD,AACD,4CAA4C,eAAe,eAAgB,CAC1E",file:"comment.vue",sourcesContent:["\n.comment[data-v-c5d5119c]{overflow:hidden;margin-bottom:16px\n}\n.comment .avatar[data-v-c5d5119c]{float:left;width:40px;height:40px;border-radius:50%\n}\n.comment .right-info[data-v-c5d5119c]{margin-left:50px\n}\n.comment .right-info p[data-v-c5d5119c]{word-break:break-word\n}\n.comment .right-info .hot[data-v-c5d5119c]{float:right\n}\n.comment .right-info .name[data-v-c5d5119c]{font-size:16px;font-weight:bold\n}\n"],sourceRoot:"webpack://"}])},135:function(t,e,o){var n=o(117);"string"==typeof n&&(n=[[t.id,n,""]]);o(18)(n,{});n.locals&&(t.exports=n.locals)},145:function(t,e,o){var n=o(119);"string"==typeof n&&(n=[[t.id,n,""]]);o(18)(n,{});n.locals&&(t.exports=n.locals)},154:function(t,e,o){var n,i;o(145),n=o(69);var a=o(187);i=n=n||{},"object"!=typeof n["default"]&&"function"!=typeof n["default"]||(i=n=n["default"]),"function"==typeof i&&(i=i.options),i.render=a.render,i.staticRenderFns=a.staticRenderFns,i._scopeId="data-v-c5d5119c",t.exports=n},157:function(t,e,o){var n,i;o(135),n=o(77);var a=o(177);i=n=n||{},"object"!=typeof n["default"]&&"function"!=typeof n["default"]||(i=n=n["default"]),"function"==typeof i&&(i=i.options),i.render=a.render,i.staticRenderFns=a.staticRenderFns,t.exports=n},177:function(module,exports){module.exports={render:function(){with(this)return bookDetail?_h("div",{attrs:{id:"book-detail"}},[_h("intro",{attrs:{title:bookDetail.title,star:bookDetail.rating.average,hot:bookDetail.rating.numRaters,imgurl:bookDetail.images.large}},[_h("p",["作者: "+_s(join(bookDetail.author)?join(bookDetail.author):"佚名")])," ",_h("p",["出版社: "+_s(bookDetail.publisher?bookDetail.publisher:"暂无")])," ",_h("p",["出版时间: "+_s(bookDetail.pubdate?bookDetail.pubdate:"暂无")])])," "," ",_h("expand",{attrs:{title:"内容简介",content:bookDetail.summary}})," ",_h("expand",{attrs:{title:"作者简介",content:bookDetail.author_intro}})," ",_h("expand",{attrs:{title:"目录",content:bookDetail.catalog.replace(/\n/g,"<br>"),type:"html"}})," ",_h("div",{directives:[{name:"infinite-scroll",rawName:"v-infinite-scroll",value:getAnnotations,expression:"getAnnotations"}],staticClass:"comment-list",attrs:{"infinite-scroll-disabled":"isNoScroll","infinite-scroll-distance":"10"}},[commentList.length?_h("h3",{staticClass:"l-spacing comment-title"},["读书笔记"]):_e()," ",_l(commentList,function(t){return _h("router-link",{attrs:{to:{name:"annotation",params:{annotationId:t.id,bookId:$route.params.bookId}}}},[_h("comment",{attrs:{imgurl:t.author_user.large_avatar,name:t.author_user.name,text:t.summary,hot:t.comments_count}})])})," ",_h("p",{directives:[{name:"show",rawName:"v-show",value:loading,expression:"loading"}],staticClass:"infinite-scroll-icon"},[_h("mt-spinner",{attrs:{type:"fading-circle"}})])," ",_h("p",{directives:[{name:"show",rawName:"v-show",value:isNoScroll&&commentList.length,expression:"isNoScroll && commentList.length"}],staticClass:"infinite-scroll-icon"},["\n      没有更多了！\n    "])])]):_e()},staticRenderFns:[]}},187:function(module,exports){module.exports={render:function(){with(this)return _h("div",{staticClass:"comment l-spacing"},[_h("img",{staticClass:"avatar",attrs:{src:imgurl}})," ",_h("div",{staticClass:"right-info"},[_h("span",{staticClass:"name"},[_s(name)])," ",_h("span",{staticClass:"hot"},[_h("m-icon",{attrs:{name:"whatshot",size:"16",color:"#f44336"}}),"\n      "+_s(hot?hot:0)+"\n    "])," ",_h("p",[_s(text)])])])},staticRenderFns:[]}}});
//# sourceMappingURL=0.68bc314e9348a5ba59e6.js.map